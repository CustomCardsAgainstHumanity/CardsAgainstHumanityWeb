<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cards Against Humanity</title>
    <link rel="stylesheet" href="/game.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  </head>
  <body data-bs-theme="dark">
    <nav class="navbar navbar-expand bg-body-tertiary bg-dark">
      <div class="container-fluid" style="height:25px">
        <ul class="navbar-nav nav-pills me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link menubar menubar_left" href="/game/create">Create Game</a>
          </li>
          <li class="nav-item">
            <a class="nav-link menubar menubar_left" href="/game/refresh">Refresh Games</a>
          </li>

          <div>
            <script>
              gameArray = [
                {
                    host: "Razor",
                    gameUUID: crypto.randomUUID(),
                    password: false,
                    currentPlayers: 2,
                    maxPlayers: 10,
                    currentSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    maxSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    progress: "In Progress", // Not Started, In Progress
                    players: ["Razor", "Khao"],
                    spectators: [], // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    goal: 10,
                    cardPacks: ["Some card pack"]
                },
                {
                    host: "Razor",
                    gameUUID: crypto.randomUUID(),
                    password: true,
                    currentPlayers: 0,
                    maxPlayers: 10,
                    currentSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    maxSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    progress: "In Progress", // Not Started, In Progress
                    players: [],
                    spectators: [], // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    goal: 10,
                    cardPacks: ["Some card pack"]
                },
                {
                    host: "Razor",
                    gameUUID: crypto.randomUUID(),
                    password: true,
                    currentPlayers: 0,
                    maxPlayers: 10,
                    currentSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    maxSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    progress: "Not Started", // Not Started, In Progress
                    players: [],
                    spectators: [], // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    goal: 10,
                    cardPacks: ["Some card pack"]
                },
                {
                    host: "Razor",
                    gameUUID: crypto.randomUUID(),
                    password: true,
                    currentPlayers: 0,
                    maxPlayers: 10,
                    currentSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    maxSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    progress: "Not Started", // Not Started, In Progress
                    players: [],
                    spectators: [], // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    goal: 10,
                    cardPacks: ["Some card pack"]
                },
                {
                    host: "Razor",
                    gameUUID: crypto.randomUUID(),
                    password: true,
                    currentPlayers: 0,
                    maxPlayers: 10,
                    currentSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    maxSpectators: 0, // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    progress: "Not Started", // Not Started, In Progress
                    players: [],
                    spectators: [], // SPECTATORS WILL NOT BE ADDED TILL LATER ON
                    goal: 10,
                    cardPacks: ["Some card pack"]
                },
            ]

              function onInputHandler(e) {
                const filteredItems = gameArray.filter(item => `${item.players.join(", ")} ${item.progress} ${item.cardPacks.join(", ")}`.toLowerCase().includes(e.value.toLowerCase()));
                let gameUUIDsToRemove = [];
                for (gameListID of document.getElementsByClassName("gamelist_lobby_id")) {
                  delete filteredItems[filteredItems.indexOf(gameListID.innerHTML)];
                  gameUUIDsToRemove = filteredItems.map(a => `gamelist_lobby_${a.gameUUID}`);
                }                
                for (item of gameUUIDsToRemove) {
                  var element = document.getElementById(item);
                  element.remove()
                }
              }
            </script>
            <input type="text" class="form-control bg-dark" id="searchInput" oninput="onInputHandler(this)" placeholder="Filter games by keyword">
          </div>
        </ul>
        <div class="nav-item">
          <a class="nav-link menubar menubar_right" style="color:#f44444;" href="/user/logout">Logout</a>
        </div>
      </div>
    </nav>
  </body>
</html>
